<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Guarantee Calculator</title>
    <style>
        .guarantee-section {
            border: 2px solid #ccc;
            padding: 20px;
            margin-bottom: 30px;
            border-radius: 10px;
            background-color: #f9f9f9;
        }
        .guarantee-section h3 {
            background-color: #ddd;
            padding: 10px;
            border-radius: 5px;
        }
        .guarantee-result {
            margin-top: 20px;
            display: none; /* 결과는 처음에 숨김 */
        }
    </style>
</head>
<body>
    <div id="guarantee-calculator">
        <h2>보증기간 계산기</h2>

        <!-- 입찰 보증금 계산 -->
        <div class="guarantee-section">
            <h3>입찰 보증기간 계산</h3>
            <form id="bid-calculator-form">
                <label for="bid_type">입찰 유형:</label>
                <select id="bid_type" required>
                    <option value="general">일반 입찰</option>
                    <option value="construction">공사 입찰</option>
                </select>
                <label for="bid_submission_date">입찰서 제출 마감일:</label>
                <input type="date" id="bid_submission_date" required>
                <label for="bid_start_date">입찰 보증금 초일(입찰서 제출 마감일 이전):</label>
                <input type="date" id="bid_start_date" required>
                <button type="submit">입찰 보증기간 만료일 계산</button>
            </form>
            <div id="bid-result" class="guarantee-result">
                <h4>입찰 보증기간 초일: <span id="bid-start-date-result"></span> (<span id="bid-start-day-result"></span>)</h4>
                <h4>입찰 보증기간 만료일: <span id="bid-end-date-result"></span> (<span id="bid-end-day-result"></span>)</h4>
                <h4>보증기간(일수): <span id="bid-days-result"></span></h4>
            </div>
        </div>

        <!-- 계약 보증금 계산 -->
        <div class="guarantee-section">
            <h3>계약 보증기간 계산</h3>
            <form id="contract-calculator-form">
                <label for="contract_start_date">계약 기간 개시일:</label>
                <input type="date" id="contract_start_date" required>
                <label for="contract_period_days">계약 보증금 기간 (일):</label>
                <input type="number" id="contract_period_days" min="1" required>
                <button type="submit">계약 보증기간 만료일 계산</button>
            </form>
            <div id="contract-result" class="guarantee-result">
                <h4>계약 보증기간 초일: <span id="contract-start-date-result"></span> (<span id="contract-start-day-result"></span>)</h4>
                <h4>계약 보증기간 만료일: <span id="contract-end-date-result"></span> (<span id="contract-end-day-result"></span>)</h4>
                <h4>보증기간(일수): <span id="contract-days-result"></span></h4>
            </div>
        </div>

        <!-- 하자보수보증금 계산 -->
        <div class="guarantee-section">
            <h3>하자보수보증기간 계산</h3>
            <form id="defect-calculator-form">
                <label for="acceptance_date">목적물 인수일:</label>
                <input type="date" id="acceptance_date" required>
                <label for="inspection_date">준공검사 완료일:</label>
                <input type="date" id="inspection_date" required>
                <label for="defect_responsibility_period">하자담보책임 기간 (일):</label>
                <input type="number" id="defect_responsibility_period" min="1" required>
                <button type="submit">하자보수보증기간 만료일 계산</button>
            </form>
            <div id="defect-result" class="guarantee-result">
                <h4>하자보수보증기간 초일: <span id="defect-start-date-result"></span> (<span id="defect-start-day-result"></span>)</h4>
                <h4>하자보수보증기간 만료일: <span id="defect-end-date-result"></span> (<span id="defect-end-day-result"></span>)</h4>
                <h4>보증기간(일수): <span id="defect-days-result"></span></h4>
            </div>
        </div>
    </div>

    <script>
    document.addEventListener('DOMContentLoaded', function() {
        // 특정 년도의 공휴일을 계산하는 함수 (예: 2024년)
        function getHolidays(year) {
            return [
                `${year}-01-01`, // 신정
                `${year}-02-09`, `${year}-02-10`, `${year}-02-11`, // 설날 연휴
                `${year}-03-01`, // 삼일절
                `${year}-05-05`, // 어린이날
                `${year}-06-06`, // 현충일
                `${year}-08-15`, // 광복절
                `${year}-09-15`, `${year}-09-16`, `${year}-09-17`, // 추석 연휴
                `${year}-10-03`, // 개천절
                `${year}-12-25`  // 성탄절
            ];
        }

        // 날짜 차이를 일수로 계산하는 함수
        function calculateDaysBetween(startDate, endDate) {
            const timeDiff = endDate - startDate;
            const dayDiff = timeDiff / (1000 * 3600 * 24); // 밀리초를 일수로 변환
            return Math.round(dayDiff);
        }

        // 날짜의 요일을 반환하는 함수
        function getDayName(date) {
            const days = ['일요일', '월요일', '화요일', '수요일', '목요일', '금요일', '토요일'];
            return days[date.getDay()];
        }

        // 휴일 여부를 확인하는 함수 (토요일, 일요일 또는 특정 년도의 공휴일 처리)
        function isHoliday(date, holidays) {
            const day = date.getDay();
            const formattedDate = date.toISOString().split('T')[0];
            return holidays.includes(formattedDate); // 공휴일만 제외
        }

        // 휴일 다음 날로 만료일을 이동하는 함수 (공휴일만 해당)
        function adjustForHoliday(endDate, holidays) {
            if (isHoliday(endDate, holidays)) {
                endDate.setDate(endDate.getDate() + 1);
            }
            return endDate;
        }

        // 입찰 보증금 계산기
        document.getElementById('bid-calculator-form').addEventListener('submit', function(event) {
            event.preventDefault();

            var bidStartDate = new Date(document.getElementById('bid_start_date').value);
            var bidSubmissionDate = new Date(document.getElementById('bid_submission_date').value);
            var bidType = document.getElementById('bid_type').value;
            var currentYear = bidStartDate.getFullYear();
            var holidays = getHolidays(currentYear);

            var bidPeriod = (bidType === 'construction') ? 90 : 30;
            var bidEndDate = new Date(bidStartDate);
            bidEndDate.setDate(bidEndDate.getDate() + bidPeriod);

            // 만료일이 공휴일이면 다음 영업일로 이동
            bidEndDate = adjustForHoliday(bidEndDate, holidays);

            var bidDays = calculateDaysBetween(bidStartDate, bidEndDate);
            document.getElementById('bid-start-date-result').textContent = bidStartDate.toISOString().split('T')[0];
            document.getElementById('bid-start-day-result').textContent = getDayName(bidStartDate);
            document.getElementById('bid-end-date-result').textContent = bidEndDate.toISOString().split('T')[0];
            document.getElementById('bid-end-day-result').textContent = getDayName(bidEndDate);
            document.getElementById('bid-days-result').textContent = bidDays + "일";
            document.getElementById('bid-result').style.display = 'block';
        });

        // 계약 보증금 계산기
        document.getElementById('contract-calculator-form').addEventListener('submit', function(event) {
            event.preventDefault();

            var contractStartDate = new Date(document.getElementById('contract_start_date').value);
            var contractPeriodDays = parseInt(document.getElementById('contract_period_days').value);
            var currentYear = contractStartDate.getFullYear();
            var holidays = getHolidays(currentYear);

            var contractEndDate = new Date(contractStartDate);
            contractEndDate.setDate(contractEndDate.getDate() + contractPeriodDays);

            // 만료일이 공휴일이면 다음 영업일로 이동
            contractEndDate = adjustForHoliday(contractEndDate, holidays);

            var contractDays = calculateDaysBetween(contractStartDate, contractEndDate);
            document.getElementById('contract-start-date-result').textContent = contractStartDate.toISOString().split('T')[0];
            document.getElementById('contract-start-day-result').textContent = getDayName(contractStartDate);
            document.getElementById('contract-end-date-result').textContent = contractEndDate.toISOString().split('T')[0];
            document.getElementById('contract-end-day-result').textContent = getDayName(contractEndDate);
            document.getElementById('contract-days-result').textContent = contractDays + "일";
            document.getElementById('contract-result').style.display = 'block';
        });

        // 하자보수보증금 계산기
        document.getElementById('defect-calculator-form').addEventListener('submit', function(event) {
            event.preventDefault();

            var acceptanceDate = new Date(document.getElementById('acceptance_date').value);
            var inspectionDate = new Date(document.getElementById('inspection_date').value);
            var defectResponsibilityPeriod = parseInt(document.getElementById('defect_responsibility_period').value);
            var defectStartDate = (acceptanceDate < inspectionDate) ? acceptanceDate : inspectionDate;
            var currentYear = defectStartDate.getFullYear();
            var holidays = getHolidays(currentYear);

            var defectEndDate = new Date(defectStartDate);
            defectEndDate.setDate(defectEndDate.getDate() + defectResponsibilityPeriod);

            // 만료일이 공휴일이면 다음 영업일로 이동
            defectEndDate = adjustForHoliday(defectEndDate, holidays);

            var defectDays = calculateDaysBetween(defectStartDate, defectEndDate);
            document.getElementById('defect-start-date-result').textContent = defectStartDate.toISOString().split('T')[0];
            document.getElementById('defect-start-day-result').textContent = getDayName(defectStartDate);
            document.getElementById('defect-end-date-result').textContent = defectEndDate.toISOString().split('T')[0];
            document.getElementById('defect-end-day-result').textContent = getDayName(defectEndDate);
            document.getElementById('defect-days-result').textContent = defectDays + "일";
            document.getElementById('defect-result').style.display = 'block';
        });
    });
    </script>
</body>
</html>
// 특정 년도의 공휴일을 계산하는 함수 (예: 2024년)
<script>
    function getHolidays(year) {
    return [
        `${year}-01-01`, // 신정
        `${year}-02-09`, `${year}-02-10`, `${year}-02-11`, // 설날 연휴
        `${year}-03-01`, // 삼일절
        `${year}-05-05`, // 어린이날
        `${year}-06-06`, // 현충일
        `${year}-08-15`, // 광복절
        `${year}-09-15`, `${year}-09-16`, `${year}-09-17`, // 추석 연휴
        `${year}-10-03`, // 개천절
        `${year}-12-25`,  // 성탄절
        `${year}-11-24`   // 예시로 든 일요일
    ];
}

// 날짜 차이를 일수로 계산하는 함수
function calculateDaysBetween(startDate, endDate) {
    const timeDiff = endDate - startDate;
    const dayDiff = timeDiff / (1000 * 3600 * 24); // 밀리초를 일수로 변환
    return Math.round(dayDiff);
}

// 날짜의 요일을 반환하는 함수
function getDayName(date) {
    const days = ['일요일', '월요일', '화요일', '수요일', '목요일', '금요일', '토요일'];
    return days[date.getDay()];
}

// 휴일 여부를 확인하는 함수 (토요일, 일요일 또는 특정 년도의 공휴일 처리)
function isHoliday(date, holidays) {
    const day = date.getDay();
    const formattedDate = date.toISOString().split('T')[0];
    return day === 6 || day === 0 || holidays.includes(formattedDate); // 6 = 토요일, 0 = 일요일
}

// 휴일 다음 날로 만료일을 이동하는 함수
function adjustForHoliday(endDate, holidays) {
    while (isHoliday(endDate, holidays)) {
        endDate.setDate(endDate.getDate() + 1);
    }
    return endDate;
}

// 입찰 보증금 계산기
document.getElementById('bid-calculator-form').addEventListener('submit', function(event) {
    event.preventDefault();
    var bidStartDate = new Date(document.getElementById('bid_start_date').value);
    var bidSubmissionDate = new Date(document.getElementById('bid_submission_date').value);
    var bidType = document.getElementById('bid_type').value;
    var currentYear = bidStartDate.getFullYear();
    var holidays = getHolidays(currentYear);

    var bidPeriod = (bidType === 'construction') ? 90 : 30;
    var bidEndDate = new Date(bidStartDate);
    bidEndDate.setDate(bidEndDate.getDate() + bidPeriod);

    // 만료일이 공휴일이면 다음 영업일로 이동
    bidEndDate = adjustForHoliday(bidEndDate, holidays);

    var bidDays = calculateDaysBetween(bidStartDate, bidEndDate);
    document.getElementById('bid-start-date-result').textContent = bidStartDate.toISOString().split('T')[0];
    document.getElementById('bid-start-day-result').textContent = getDayName(bidStartDate);
    document.getElementById('bid-end-date-result').textContent = bidEndDate.toISOString().split('T')[0];
    document.getElementById('bid-end-day-result').textContent = getDayName(bidEndDate);
    document.getElementById('bid-days-result').textContent = bidDays + "일";
    document.getElementById('bid-result').style.display = 'block';
});

// 계약 보증금 계산기
document.getElementById('contract-calculator-form').addEventListener('submit', function(event) {
    event.preventDefault();
    var contractStartDate = new Date(document.getElementById('contract_start_date').value);
    var contractPeriodDays = parseInt(document.getElementById('contract_period_days').value);
    var currentYear = contractStartDate.getFullYear();
    var holidays = getHolidays(currentYear);

    var contractEndDate = new Date(contractStartDate);
    contractEndDate.setDate(contractEndDate.getDate() + contractPeriodDays);

    // 만료일이 공휴일이면 다음 영업일로 이동
    contractEndDate = adjustForHoliday(contractEndDate, holidays);

    var contractDays = calculateDaysBetween(contractStartDate, contractEndDate);
    document.getElementById('contract-start-date-result').textContent = contractStartDate.toISOString().split('T')[0];
    document.getElementById('contract-start-day-result').textContent = getDayName(contractStartDate);
    document.getElementById('contract-end-date-result').textContent = contractEndDate.toISOString().split('T')[0];
    document.getElementById('contract-end-day-result').textContent = getDayName(contractEndDate);
    document.getElementById('contract-days-result').textContent = contractDays + "일";
    document.getElementById('contract-result').style.display = 'block';
});

// 하자보수보증금 계산기
document.getElementById('defect-calculator-form').addEventListener('submit', function(event) {
    event.preventDefault();
    var acceptanceDate = new Date(document.getElementById('acceptance_date').value);
    var inspectionDate = new Date(document.getElementById('inspection_date').value);
    var defectResponsibilityPeriod = parseInt(document.getElementById('defect_responsibility_period').value);
    var defectStartDate = (acceptanceDate < inspectionDate) ? acceptanceDate : inspectionDate;
    var currentYear = defectStartDate.getFullYear();
    var holidays = getHolidays(currentYear);

    var defectEndDate = new Date(defectStartDate);
    defectEndDate.setDate(defectEndDate.getDate() + defectResponsibilityPeriod);

    // 만료일이 공휴일이면 다음 영업일로 이동
    defectEndDate = adjustForHoliday(defectEndDate, holidays);

    var defectDays = calculateDaysBetween(defectStartDate, defectEndDate);
    document.getElementById('defect-start-date-result').textContent = defectStartDate.toISOString().split('T')[0];
    document.getElementById('defect-start-day-result').textContent = getDayName(defectStartDate);
    document.getElementById('defect-end-date-result').textContent = defectEndDate.toISOString().split('T')[0];
    document.getElementById('defect-end-day-result').textContent = getDayName(defectEndDate);
    document.getElementById('defect-days-result').textContent = defectDays + "일";
    document.getElementById('defect-result').style.display = 'block';
});
</script>
